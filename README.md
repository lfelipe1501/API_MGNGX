# Login2FA with Bun

Login application with two-factor authentication and subdomain management for Nginx, optimized for use with Bun.

## Requirements

- Bun v1.2.10 or higher

## Installation

1. Clone the repository:

   ```bash
   git clone https://github.com/lfelipe1501/API_MGNGX.git
   ```
   
2. Install dependencies:

   ```bash
   bun install
   ```

3. Set up the environment:

   ```bash
   # On Linux/macOS
   services/bun-setup.sh
   
   # On Windows
   bun run services/win-setup.js
   ```

## Configuration

The project uses `.env` files for environment variable configuration:

- `.env`: Configuration for production environment
- `.env.development`: Configuration for development environment

## Project Structure

```
project/
├── config/          # Security and other configurations
├── logs/            # Logs generated by the application
├── public/          # Static files
├── services/        # Service scripts and utilities
│   ├── bun-setup.sh     # Setup script
│   ├── service-dev.js   # Development mode service
│   ├── service-prod.js  # Production mode service
│   ├── stop-service.js  # Stop services
│   ├── verify-bun.js    # Verify dependencies
│   └── win-setup.js     # Windows configuration
├── views/           # EJS templates
├── bun.config.js    # Environment configuration
├── db.js            # Database configuration
├── server.js        # Main server
└── ...
```

## Execution

### Development Mode

To run the application in development mode with hot reloading:

```bash
bun run dev
```

This will load environment variables from `.env.development` and use the development port (default 3001).

> [!important]
> _**IF YOU WISH** you can use this data to login with the database that is in the project.
> The `.sqlite` file contains the following data to start testing the application:_

| Data | Value |
|-----|-------------|
|USERNAME|admin|
|PASSWORD|developer|
|QR-MFA|![QR-admin-MFA](https://github.com/user-attachments/assets/2eb12dfb-8127-42b6-843a-421d2c400b87)|
|MFA-MANUALLY|OV2E2UCOMU7DYMRTEETDYJKMGQQTQJC6|

### Production Mode

To run the application in production mode:

```bash
bun run start
```

This will load environment variables from `.env` and use the production port (default 5001).

> [!important]
> _**BEFORE RUNNING** the project you **MUST** delete the `.sqlite` database to create a new one
> when starting the project and be able to register your own users._
>
> _**IT IS IMPORTANT** that you put the application behind a reverse proxy so that it can use a domain or subdomain._
>
> _**AFTER THIS** you can edit the `.env` file to add the original keys of a domain or subdomain that has reCAPTCHA V3._

### Running as a Service

To run the application as a background service:

```bash
# Development Mode
bun run service:dev

# Production Mode
bun run service:prod

# Stop services
bun run stop
```

## Environment Verification

To verify which environment is configured without starting the server:

```bash
bun run test
```

## Features

- Authentication with username and password
- Two-factor authentication (2FA)
- User management (for administrators)
- Nginx subdomain creation
- Activity logging
- reCAPTCHA protection

### Contact / Social Media

*Get the latest news about Web Development, Open Source, Tools, Server & Security*

[![Twitter](https://raw.githubusercontent.com/lfelipe1501/lfelipe-projects/master/icons/filled/twitter.svg)](https://twitter.com/lfelipe1501)
[![Facebook](https://raw.githubusercontent.com/lfelipe1501/lfelipe-projects/master/icons/filled/facebook.svg)](https://www.facebook.com/lfelipe1501)
[![Github](https://raw.githubusercontent.com/lfelipe1501/lfelipe-projects/master/icons/filled/github.svg)](https://github.com/lfelipe1501)

### Development by

Developer / Author: [Luis Felipe Sanchez](https://github.com/lfelipe1501)
Company: [lfsystems](https://www.lfsystems.com.co)
